import{d as m,o as d,c as h,r as $,n as I,a as L,t as w,b as c,e as P,f as b,g as k,u as v,h as y,w as S,i as M,j as C,k as N,l as O,m as T}from"./vendor.20f5dc4d.js";const U=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const e of a)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const e={};return a.integrity&&(e.integrity=a.integrity),a.referrerpolicy&&(e.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?e.credentials="include":a.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(a){if(a.ep)return;a.ep=!0;const e=r(a);fetch(a.href,e)}};U();const z=m({props:{label:{type:String,default:"\u63D0\u4EA4"},disabled:{type:Boolean,default:!1}},setup(i){return(o,r)=>(d(),h("button",{class:I(["color-button",{disabled:i.disabled}])},[$(o.$slots,"default",{},()=>[L(w(i.label),1)])],2))}});const R={class:"color-file-upload"},V={class:"file-button"},j=c("i",{class:"file-glyphicon"},null,-1),H=c("span",null,"UPLOAD FILE",-1),W=c("i",{class:"file-tips"},"Drop files here to upload",-1),q=[W],G=m({emits:["change"],setup(i,{emit:o}){const r=t=>{const n=t.target.files;if(!n)return!1;p(n)},l=t=>{t.stopPropagation(),t.preventDefault()},a=t=>{t.stopPropagation(),t.preventDefault()},e=t=>{t.stopPropagation(),t.preventDefault();const n=t.dataTransfer.files;p(n)},s=t=>{t.stopPropagation(),t.preventDefault();const n=t.clipboardData.files;p(n)},u=1*1024*1024,g=/^image\//,p=t=>{if(t.length!==1)return _("\u4E0D\u652F\u6301\u591A\u4E2A\u6587\u4EF6\u540C\u65F6\u64CD\u4F5C\uFF0C\u8BF7\u4EC5\u9009\u62E9\u5355\u4E2A\u6587\u4EF6"),!1;const n=t[0],{name:f,size:x,type:D}=n;if(!g.test(D))return _(`\u5F53\u524D\u6587\u4EF6\u7C7B\u578B\u4E3A${D}\uFF0C\u7C7B\u578B\u4E0D\u7B26\uFF0C\u8BF7\u9009\u62E9\u56FE\u7247\u7C7B\u578B\uFF01`),!1;if(x>u)return _("\u6587\u4EF6\u8D85\u8FC7\u6700\u5927\u9650\u52361M\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9"),!1;const F=new FileReader;F.onload=A=>{const B=A.target.result;E(f,B)},F.onerror=()=>{_(F.error.message)},F.readAsDataURL(n)},_=t=>{alert(t)},E=(t,n)=>{o("change",{name:t,base64:n})};return(t,n)=>(d(),h("div",R,[c("div",V,[j,H,c("input",{class:"file-input",type:"file",name:"file",accept:"image/*",onChange:r},null,32)]),c("div",{class:"file-area",draggable:!0,contenteditable:!0,onDragenter:l,onDragover:a,onDrop:e,onPaste:s},q,32)]))}});const K=m({props:{uint8:null,width:null,height:null},emits:["click"],setup(i,{emit:o}){const r=i,{uint8:l,width:a,height:e}=P(r);b(()=>{console.log("data: ",r.uint8)});const s=2;let u=new Array(a.value*e.value);return u=u.fill("").map(g=>"#"+Math.floor(Math.random()*16777215).toString(16)),console.log(u),(g,p)=>(d(),h("div",{class:"pixel",style:k({width:`${v(a)*s}px`,height:`${v(e)*s}px`})},null,4))}});const X={class:"container"},Y={class:"container-header"},Z={key:0,class:"container-wall"},J={key:1,class:"container-wraper"},Q={class:"container-footer"},ee=m({setup(i){const o=y(!0),r=y(0),l=y(0),a=y(""),e=new Image,s=document.createElement("canvas"),u=y(new Uint8ClampedArray),g=()=>{e.onload=async()=>{s.width=e.naturalWidth,s.height=e.naturalHeight,r.value=s.width,l.value=s.height,p()},e.onerror=n=>{console.error(n)}},p=()=>{const n=s.getContext("2d");n.drawImage(e,0,0);const f=n.getImageData(0,0,e.naturalWidth,e.naturalHeight).data;u.value=f},_=({name:n,base64:f})=>{a.value=n,e.src=f};S(u,n=>{o.value&&(o.value=!1)});const E=async()=>{u.value=new Uint8ClampedArray,await N(),o.value=!0,a.value="",r.value=0,l.value=0},t=M(()=>o.value?"\u6574\u4E00\u5F20\u56FE\u7247\u4E0A\u6765\u5427":`${a.value} ${r.value} * ${l.value}`);return b(()=>{g()}),(n,f)=>(d(),h("div",X,[c("div",Y,w(v(t)),1),o.value?(d(),h("div",Z,[C(v(G),{onChange:_})])):(d(),h("div",J,[C(K,{uint8:u.value,width:r.value,height:l.value},null,8,["uint8","width","height"])])),c("footer",Q,[C(v(z),{label:"\u91CD\u7F6E",u:"primary",onClick:E})])]))}});const te=m({setup(i){return(o,r)=>(d(),O(ee))}});T(te).mount("#app");
