import{d as B,o as y,c as $,r as G,n as Z,a as q,t as M,b as c,e as f,w as K,f as J,g as Q,u as L,h as P,i as R,j as ee,v as te,k as ae,l as oe}from"./vendor.3668cd27.js";const se=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))h(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&h(d)}).observe(document,{childList:!0,subtree:!0});function p(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function h(r){if(r.ep)return;r.ep=!0;const n=p(r);fetch(r.href,n)}};se();const ne=B({props:{label:{type:String,default:"\u63D0\u4EA4"},disabled:{type:Boolean,default:!1}},setup(_){return(u,p)=>(y(),$("button",{class:Z(["color-button",{disabled:_.disabled}])},[G(u.$slots,"default",{},()=>[q(M(_.label),1)])],2))}});const re={class:"color-file-upload"},le={class:"file-button"},ue=c("i",{class:"file-glyphicon"},null,-1),ce=c("span",null,"UPLOAD FILE",-1),ie=c("i",{class:"file-tips"},"Drop files here to upload",-1),de=[ie],fe=B({emits:["change"],setup(_,{emit:u}){const p=t=>{const o=t.target.files;if(!o)return!1;g(o)},h=t=>{t.stopPropagation(),t.preventDefault()},r=t=>{t.stopPropagation(),t.preventDefault()},n=t=>{t.stopPropagation(),t.preventDefault();const o=t.dataTransfer.files;g(o)},d=t=>{t.stopPropagation(),t.preventDefault();const o=t.clipboardData.files;g(o)},m=1*1024*1024,w=/^image\//,g=t=>{if(t.length!==1)return v("\u4E0D\u652F\u6301\u591A\u4E2A\u6587\u4EF6\u540C\u65F6\u64CD\u4F5C\uFF0C\u8BF7\u4EC5\u9009\u62E9\u5355\u4E2A\u6587\u4EF6"),!1;const o=t[0],{name:C,size:D,type:E}=o;if(!w.test(E))return v(`\u5F53\u524D\u6587\u4EF6\u7C7B\u578B\u4E3A${E}\uFF0C\u7C7B\u578B\u4E0D\u7B26\uFF0C\u8BF7\u9009\u62E9\u56FE\u7247\u7C7B\u578B\uFF01`),!1;if(D>m)return v("\u6587\u4EF6\u8D85\u8FC7\u6700\u5927\u9650\u52361M\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9"),!1;const F=new FileReader;F.onload=S=>{const A=S.target.result;k(C,A)},F.onerror=()=>{v(F.error.message)},F.readAsDataURL(o)},v=t=>{alert(t)},k=(t,o)=>{u("change",{name:t,base64:o})};return(t,o)=>(y(),$("div",re,[c("div",le,[ue,ce,c("input",{class:"file-input",type:"file",name:"file",accept:"image/*",title:"",onChange:p},null,32)]),c("div",{class:"file-area",draggable:!0,contenteditable:!0,onDragenter:h,onDragover:r,onDrop:n,onPaste:d},de,32)]))}});const pe={class:"container"},ve={key:0,class:"container-wall"},he={key:1,class:"container-wraper"},ge={class:"container-area"},_e={class:"container-footer"},me=B({setup(_){const u=f(!0),p=f(0),h=f(0),r=f(""),n=new Image,d=f(null),m=f(!1),w=f(null),g=f("#3F3F3F"),v=f("#3F3F3F"),k=f(!0),t=11,o=14,C=o*t,D=o*t,E=o,F=(()=>{const e=[];for(let a=1;a<t;a++)e.push([a,0,a,t]),e.push([0,a,t,a]);return e.map(a=>a.map(s=>s*o))})(),S=()=>{n.onload=()=>{const e=d.value;e.width=n.naturalWidth,e.height=n.naturalHeight,p.value=n.naturalWidth,h.value=n.naturalHeight,A()},n.onerror=e=>{console.error(e)}},A=()=>{d.value.getContext("2d").drawImage(n,0,0)},T=e=>{const{0:a,1:s,2:l,3:i}=e.data;return`rgba(${a}, ${s}, ${l}, ${i/255})`},N=e=>{const a=I=>I.toString(16),{0:s,1:l,2:i,3:b}=e.data;return`#${a(s)}${a(l)}${a(i)}${a(b)}`.toUpperCase()},O=async e=>{const{offsetX:a,offsetY:s}=e;if(a<0||s<0)return;m.value=!0,H(a,s);const l=x(a,s);g.value=l},H=(e,a)=>{const s=d.value,l=w.value;l.style.left=`${e+E}px`,l.style.top=`${a+E}px`;const i=l.getContext("2d"),b=Math.min(Math.max(0,e-5),s.width-t),I=Math.min(Math.max(0,a-5),s.height-t);i.clearRect(0,0,C,D),i.drawImage(s,b,I,t,t,0,0,C,D),U(i)},U=e=>{e.imageSmoothingEnabled=!1,e.lineCap="round",e.beginPath(),e.strokeStyle="#000000",e.arc(t*o/2,t*o/2,t*o/2-1,0,Math.PI*2),e.stroke(),e.clip(),e.strokeStyle="#D6D6D6",F.forEach(a=>{const{0:s,1:l,2:i,3:b}=a;e.moveTo(s,l),e.lineTo(i,b)}),e.stroke(),e.beginPath(),e.strokeStyle="#FF0000",e.rect((t-1)*o/2,(t-1)*o/2,1*o,1*o),e.stroke()},X=()=>{m.value=!1,g.value="#3F3F3F"},z=e=>{const{offsetX:a,offsetY:s}=e;if(a<0||s<0)return;const l=x(a,s);v.value=l},x=(e,a)=>{const i=d.value.getContext("2d").getImageData(e,a,1,1);return k.value?N(i):T(i)},V=e=>{navigator.clipboard.writeText(e).then(a=>{console.log(`${e} \u590D\u5236\u6210\u529F`)}).catch(a=>{console.error(a)})};K(v,e=>{V(e)});const W=({name:e,base64:a})=>{u.value=!1,r.value=e,n.src=a},Y=()=>{u.value=!0,m.value=!1,r.value="",p.value=0,h.value=0,g.value="#3F3F3F",v.value="#3F3F3F"},j=J(()=>u.value?"\u6574\u4E00\u5F20\u56FE\u7247\u4E0A\u6765\u5427":`${r.value} ${p.value} * ${h.value}`);return Q(()=>{S()}),(e,a)=>(y(),$("div",pe,[c("div",{class:"container-header",style:P({color:g.value})},[c("p",null,M(L(j)),1),c("div",{class:"container-active",style:P({backgroundColor:v.value})},null,4)],4),u.value?(y(),$("div",ve,[R(L(fe),{onChange:W})])):(y(),$("div",he,[c("div",ge,[c("canvas",{ref:(s,l)=>{l.canvasRef=s,d.value=s},onMousemove:O,onMouseleave:X,onClick:z},null,544),ee(c("canvas",{ref:(s,l)=>{l.layerRef=s,w.value=s},class:"container-layer",style:P({borderRadius:`${t*o}px`}),width:C,height:D},null,4),[[te,m.value]])])])),c("footer",_e,[R(L(ne),{label:"\u91CD\u7F6E",u:"primary",onClick:Y})])]))}});const Fe=B({setup(_){return(u,p)=>(y(),ae(me))}});oe(Fe).mount("#app");
